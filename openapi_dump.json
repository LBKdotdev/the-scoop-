{"openapi":"3.1.0","info":{"title":"Ice Cream Inventory Tracker","version":"0.1.0"},"paths":{"/api/flavors":{"get":{"tags":["flavors"],"summary":"List Flavors","operationId":"list_flavors_api_flavors_get","parameters":[{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["flavors"],"summary":"Create Flavor","operationId":"create_flavor_api_flavors_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlavorCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/flavors/{flavor_id}":{"put":{"tags":["flavors"],"summary":"Update Flavor","operationId":"update_flavor_api_flavors__flavor_id__put","parameters":[{"name":"flavor_id","in":"path","required":true,"schema":{"type":"integer","title":"Flavor Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlavorUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["flavors"],"summary":"Archive Flavor","operationId":"archive_flavor_api_flavors__flavor_id__delete","parameters":[{"name":"flavor_id","in":"path","required":true,"schema":{"type":"integer","title":"Flavor Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/production":{"post":{"tags":["production"],"summary":"Log Production","operationId":"log_production_api_production_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["production"],"summary":"List Production","operationId":"list_production_api_production_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/production/{entry_id}":{"delete":{"tags":["production"],"summary":"Delete Production","operationId":"delete_production_api_production__entry_id__delete","parameters":[{"name":"entry_id","in":"path","required":true,"schema":{"type":"integer","title":"Entry Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/counts":{"post":{"tags":["counts"],"summary":"Submit Counts","operationId":"submit_counts_api_counts_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CountBatch"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/counts/smart-defaults":{"get":{"tags":["counts"],"summary":"Get Smart Defaults","description":"Calculate smart defaults for tonight's count.\n\nFormula: estimated = last_count + produced_since - avg_daily_consumption","operationId":"get_smart_defaults_api_counts_smart_defaults_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/counts/history":{"get":{"tags":["counts"],"summary":"Count History","operationId":"count_history_api_counts_history_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/inventory":{"get":{"tags":["dashboard"],"summary":"Current Inventory","description":"Current on-hand inventory per flavor per product type,\nbased on last count + production since last count.","operationId":"current_inventory_api_dashboard_inventory_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/dashboard/consumption":{"get":{"tags":["dashboard"],"summary":"Daily Consumption","description":"Calculate daily consumption per flavor per product type.\n\nConsumed = previous_count + produced_between - current_count","operationId":"daily_consumption_api_dashboard_consumption_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/popularity":{"get":{"tags":["dashboard"],"summary":"Flavor Popularity","description":"Rank flavors by total consumption over the period.","operationId":"flavor_popularity_api_dashboard_popularity_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/alerts":{"get":{"tags":["dashboard"],"summary":"Low Stock Alerts","description":"Generate low stock alerts based on current inventory vs avg consumption.","operationId":"low_stock_alerts_api_dashboard_alerts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/dashboard/production-vs-consumption":{"get":{"tags":["dashboard"],"summary":"Production Vs Consumption","description":"Compare total production to total consumption per flavor.","operationId":"production_vs_consumption_api_dashboard_production_vs_consumption_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/insights":{"get":{"summary":"Get Insights","operationId":"get_insights_api_insights_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Serve Index","operationId":"serve_index__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"CountBatch":{"properties":{"entries":{"items":{"$ref":"#/components/schemas/CountEntry"},"type":"array","title":"Entries"}},"type":"object","required":["entries"],"title":"CountBatch"},"CountEntry":{"properties":{"flavor_id":{"type":"integer","title":"Flavor Id"},"product_type":{"type":"string","title":"Product Type"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["flavor_id","product_type","count"],"title":"CountEntry"},"FlavorCreate":{"properties":{"name":{"type":"string","title":"Name"},"category":{"type":"string","title":"Category","default":"classics"}},"type":"object","required":["name"],"title":"FlavorCreate"},"FlavorUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Active"}},"type":"object","title":"FlavorUpdate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ProductionCreate":{"properties":{"flavor_id":{"type":"integer","title":"Flavor Id"},"product_type":{"type":"string","title":"Product Type"},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["flavor_id","product_type","quantity"],"title":"ProductionCreate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}